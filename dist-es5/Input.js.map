{"version":3,"file":"Input.js","sources":["../lib/Input.js"],"sourcesContent":["'use strict'\n\nconst React = require('react')\n\nconst SIZER_STYLES = {\n  position: 'absolute',\n  width: 0,\n  height: 0,\n  visibility: 'hidden',\n  overflow: 'scroll',\n  whiteSpace: 'pre'\n}\n\nconst STYLE_PROPS = [\n  'fontSize',\n  'fontFamily',\n  'fontWeight',\n  'fontStyle',\n  'letterSpacing'\n]\n\nclass Input extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { inputWidth: null }\n  }\n\n  componentDidMount () {\n    if (this.props.autoresize) {\n      this.copyInputStyles()\n      this.updateInputWidth()\n    }\n\n    if (this.props.autofocus) {\n      this.input.focus()\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.autoresize && prevProps.query !== this.props.query) {\n      this.updateInputWidth()\n    }\n  }\n\n  componentWillReceiveProps (newProps) {\n    if (this.input.value !== newProps.query) {\n      this.input.value = newProps.query\n    }\n  }\n\n  copyInputStyles () {\n    const inputStyle = window.getComputedStyle(this.input)\n\n    STYLE_PROPS.forEach((prop) => {\n      this.sizer.style[prop] = inputStyle[prop]\n    })\n  }\n\n  updateInputWidth () {\n    this.setState({ inputWidth: Math.ceil(this.sizer.scrollWidth) + 2 })\n  }\n\n  render () {\n    const sizerText = this.props.query || this.props.placeholder\n\n    const { expandable, placeholder, listboxId, selectedIndex } = this.props\n\n    const selectedId = `${listboxId}-${selectedIndex}`\n\n    return (\n      <div className={this.props.classNames.searchInput}>\n        <input\n          ref={(c) => { this.input = c }}\n          role='combobox'\n          aria-autocomplete='list'\n          aria-label={placeholder}\n          aria-owns={listboxId}\n          aria-activedescendant={selectedIndex > -1 ? selectedId : null}\n          aria-expanded={expandable}\n          placeholder={placeholder}\n          style={{ width: this.state.inputWidth }} />\n        <div ref={(c) => { this.sizer = c }} style={SIZER_STYLES}>{sizerText}</div>\n      </div>\n    )\n  }\n}\n\nmodule.exports = Input\n"],"names":["const","super","this"],"mappings":"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"}