{"version":3,"file":"Suggestions.js","sources":["../lib/Suggestions.js"],"sourcesContent":["'use strict'\n\nconst React = require('react')\n\nfunction markIt (input, query) {\n  const escaped = query.replace(/[-\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n  const regex = RegExp(escaped, 'gi')\n\n  return {\n    __html: input.replace(regex, '<mark>$&</mark>')\n  }\n}\n\nfunction filterSuggestions (query, suggestions, length) {\n  const regex = new RegExp(`\\\\b${query}`, 'i')\n  return suggestions.filter((item) => regex.test(item.name)).slice(0, length)\n}\n\nclass Suggestions extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      options: filterSuggestions(this.props.query, this.props.suggestions, this.props.maxSuggestionsLength)\n    }\n  }\n\n  componentWillReceiveProps (newProps) {\n    this.setState({\n      options: filterSuggestions(newProps.query, newProps.suggestions, newProps.maxSuggestionsLength)\n    })\n  }\n\n  render () {\n    if (!this.props.expandable || !this.state.options.length) {\n      return null\n    }\n\n    const options = this.state.options.map((item, i) => {\n      const key = `${this.props.listboxId}-${i}`\n      const classNames = []\n\n      if (this.props.selectedIndex === i) {\n        classNames.push(this.props.classNames.isActive)\n      }\n\n      if (item.disabled) {\n        classNames.push(this.props.classNames.isDisabled)\n      }\n\n      return (\n        <li\n          id={key}\n          key={key}\n          role='option'\n          className={classNames.join(' ')}\n          aria-disabled={item.disabled === true}\n          onMouseDown={() => this.props.addTag(item)}>\n          <span dangerouslySetInnerHTML={markIt(item.name, this.props.query)} />\n        </li>\n      )\n    })\n\n    return (\n      <div className={this.props.classNames.suggestions}>\n        <ul role='listbox' id={this.props.listboxId}>{options}</ul>\n      </div>\n    )\n  }\n}\n\nmodule.exports = Suggestions\n"],"names":["const","super","this"],"mappings":"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"}